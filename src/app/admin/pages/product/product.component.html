<div class="container product">
  <h1 class="product__title text-capitalize fw-bold text-center my-3 text-info">Danh sách sản phẩm</h1>
  <div class="d-flex justify-content-between my-3">
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addProductModal">
      Thêm sản phẩm mới
    </button>
    <div>
      <label>Chọn danh sách hiển thị</label>:
      <select class="form-select" [(ngModel)]="count">
        <option selected value="5">5</option>
        <option value="10">10</option>
        <option value="20">20</option>
      </select>
    </div>
  </div>

  <!-- Modal Add Product-->
  <div class="modal fade" id="addProductModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Thêm sản phẩm</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Form -->
          <form #frmAddProduct="ngForm" (submit)="addProduct(frmAddProduct)">
            <div class="mb-3">
              <label for="exampleInputName"  class="form-label"
                >Tên Sản Phẩm</label
              >
              <input
                type="text"
                class="form-control"
                id="exampleInputName"
                [(ngModel)]="newProduct.name"
                #name="ngModel"
                name="name"
                required
                minlength="4"
                maxlength="40"
              />
              <div *ngIf="name.invalid && name.dirty" class="alert alert-danger" role="alert">
                <strong *ngIf="name.errors?.['required']">Tên Sản Phẩm là bắt buộc</strong>
                <strong *ngIf="name.errors?.['minlength']">Tên Sản Phẩm tối thiểu 4 kí tự</strong>
                <strong *ngIf="name.errors?.['maxlength']">Tên Sản Phẩm tối đa 40 kí tự</strong>
              </div>
              <label for="exampleInputPhone" class="form-label"
                >Hình Sản Phẩm</label
              >
              <input
                type="text"
                class="form-control"
                [(ngModel)]="newProduct.image"
                name="image"
                #image="ngModel"
                required
                minlength="9"
                maxlength="40"
              />
              <div *ngIf="image.invalid && image.dirty" class="alert alert-danger" role="alert">
                <strong *ngIf="image.errors?.['required']">Hình Sản Phẩm là bắt buộc</strong>
                <strong *ngIf="image.errors?.['minlength']">Hình Sản Phẩm tối thiểu 9 kí tự</strong>
                <strong *ngIf="image.errors?.['maxlength']">Hình Sản Phẩm tối đa 10 kí tự</strong>
              </div>
              <label for="exampleInputEmail1" class="form-label"
                >Thể Loại Sản Phẩm</label
              >
              <input
                type="text"
                class="form-control"
                #category="ngModel"
                [(ngModel)]="newProduct.category"
                name="category"
              />
              <div *ngIf="category.invalid && category.dirty" class="alert alert-danger" role="alert">
                <strong *ngIf="category.errors?.['required']">Thể Loại Sản Phẩm là bắt buộc</strong>
              </div>

              <label for="exampleInputEmail1" class="form-label"
                >Mô Tả Sản Phẩm</label
              >
              <input
                type="text"
                class="form-control"
                #description="ngModel"
                [(ngModel)]="newProduct.description"
                name="description"
              />
              <div *ngIf="description.invalid && description.dirty" class="alert alert-danger" role="alert">
                <strong *ngIf="description.errors?.['required']">Mô Tả Sản Phẩm là bắt buộc</strong>
              </div>

              <label for="exampleInputEmail1" class="form-label"
                >Giá Sản Phẩm</label
              >
              <input
                type="number"
                class="form-control"
                #price="ngModel"
                [(ngModel)]="newProduct.price"
                name="price"
              />
              <div *ngIf="price.invalid && price.dirty" class="alert alert-danger" role="alert">
                <strong *ngIf="price.errors?.['required']">Giá Sản Phẩm là bắt buộc</strong>
              </div>

              <input type="hidden" name="quantity" [(ngModel)]="newProduct.quantity" value="1">
            </div>

            <button type="submit" class="btn btn-primary text-capitalize text-center">Thêm Sản Phẩm</button>
        </form>
          <!-- End Form -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
        </div>
      </div>
    </div>
  </div>
  <!-- End modal  addProduct-->

  <!-- Modal Edit Product-->
  <div class="modal fade" id="editProductModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Thêm sản phẩm</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Form -->
          <form #frmEditProduct="ngForm" (submit)="editProduct(frmEditProduct)">
            <div class="mb-3">
              <label for="exampleInputName"  class="form-label"
                >Tên Sản Phẩm</label
              >
              <input
                type="text"
                class="form-control"
                id="exampleInputName"
                [(ngModel)]="editproduct.name"
                #name="ngModel"
                name="name"
                required
                minlength="4"
                maxlength="40"
              />
              <div *ngIf="name.invalid && name.dirty" class="alert alert-danger" role="alert">
                <strong *ngIf="name.errors?.['required']">Tên Sản Phẩm là bắt buộc</strong>
                <strong *ngIf="name.errors?.['minlength']">Tên Sản Phẩm tối thiểu 4 kí tự</strong>
                <strong *ngIf="name.errors?.['maxlength']">Tên Sản Phẩm tối đa 40 kí tự</strong>
              </div>
              <label for="exampleInputPhone" class="form-label"
                >Hình Sản Phẩm</label
              >
              <input
                type="text"
                class="form-control"
                [(ngModel)]="editproduct.image"
                name="image"
                #image="ngModel"
                required
                minlength="9"
                maxlength="40"
              />
              <div *ngIf="image.invalid && image.dirty" class="alert alert-danger" role="alert">
                <strong *ngIf="image.errors?.['required']">Hình Sản Phẩm là bắt buộc</strong>
                <strong *ngIf="image.errors?.['minlength']">Hình Sản Phẩm tối thiểu 9 kí tự</strong>
                <strong *ngIf="image.errors?.['maxlength']">Hình Sản Phẩm tối đa 10 kí tự</strong>
              </div>
              <label for="exampleInputEmail1" class="form-label"
                >Thể Loại Sản Phẩm</label
              >
              <input
                type="text"
                class="form-control"
                #category="ngModel"
                [(ngModel)]="editproduct.category"
                name="category"
              />
              <div *ngIf="category.invalid && category.dirty" class="alert alert-danger" role="alert">
                <strong *ngIf="category.errors?.['required']">Thể Loại Sản Phẩm là bắt buộc</strong>
              </div>

              <label for="exampleInputEmail1" class="form-label"
                >Mô Tả Sản Phẩm</label
              >
              <input
                type="text"
                class="form-control"
                #description="ngModel"
                [(ngModel)]="editproduct.description"
                name="description"
              />
              <div *ngIf="description.invalid && description.dirty" class="alert alert-danger" role="alert">
                <strong *ngIf="description.errors?.['required']">Mô Tả Sản Phẩm là bắt buộc</strong>
              </div>

              <label for="exampleInputEmail1" class="form-label"
                >Giá Sản Phẩm</label
              >
              <input
                type="number"
                class="form-control"
                #price="ngModel"
                [(ngModel)]="editproduct.price"
                name="price"
              />
              <div *ngIf="price.invalid && price.dirty" class="alert alert-danger" role="alert">
                <strong *ngIf="price.errors?.['required']">Giá Sản Phẩm là bắt buộc</strong>
              </div>

              <input type="hidden" name="quantity" [(ngModel)]="editproduct.quantity" value="1">
            </div>

            <button type="submit" class="btn btn-primary text-capitalize text-center">Cập Nhật Sản Phẩm</button>
        </form>
          <!-- End Form -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
        </div>
      </div>
    </div>
  </div>
  <!-- End modal edit -->
  <table class="table table-striped .table-bordered">
    <thead>
      <tr class="">
        <th>STT</th>
        <th>Tên Sản Phẩm</th>
        <th>Hình Sản Phẩm</th>
        <th>Giá Sản Phẩm</th>
        <th>Hành Động</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of listProduct | paginate: { itemsPerPage: count, currentPage: p}; ; let i = index">
        <td>{{ i + 1 }}.</td>
        <td><b>{{ item.name }}</b></td>
        <td>
          <img src="/assets/images/{{ item.image}}" class="product__image" alt="">
        </td>
        <td>
          {{ item.price}}.000đ
        </td>
        <td>
          <button class="btn btn-warning" (click)="edit(item)" data-bs-toggle="modal" data-bs-target="#editProductModal">Edit</button><br>
          <button class="btn btn-danger" (click)="delete(item.id, item.name)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="text-right">
    <pagination-controls (pageChange)="p = $event"></pagination-controls>
  </div>
</div>
